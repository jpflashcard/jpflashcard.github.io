"use strict";(globalThis["webpackChunkjp_flashcard"]=globalThis["webpackChunkjp_flashcard"]||[]).push([[505],{1816:(e,a,s)=>{s.d(a,{H:()=>d,N$:()=>n});var o=s(7141),t=s(2857);const r={apiKey:"AIzaSyBDlgNqvxPdP__ikTXGY8SDyYmK-xnEur8",authDomain:"jp-learning-chrome-extension.firebaseapp.com",databaseURL:"https://jp-learning-chrome-extension-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"jp-learning-chrome-extension",storageBucket:"jp-learning-chrome-extension.appspot.com",messagingSenderId:"904082508990",appId:"1:904082508990:web:c8823040360c99c16f62ef",measurementId:"G-XK05NP4348"},d=(0,o.ZF)(r),n=(0,t.N8)()},2597:(e,a,s)=>{s.d(a,{T:()=>d});var o=s(1809),t=s(1816),r=s(2857);const d=(0,o.Q_)("flashcard",{state:()=>({words:[],newWords:[],userEmail:""}),getters:{masteredWords:e=>e.words.filter((e=>e.mastered)),unmasteredWords:e=>e.words.filter((e=>!e.mastered)),allTags:e=>{const a=[];for(let s=0;s<e.words.length;s++)if(e.words[s].tags)for(let o=0;o<e.words[s].tags.length;o++)a.includes(e.words[s].tags[o])||a.push(e.words[s].tags[o]);return a}},actions:{addWord(e){this.words.push(e)},addnewWord(e){this.newWords.push(e)},updateWordInState(e){const a=this.words.findIndex((a=>a.kanji===e.kanji));this.words[a]=e},updateWord(e){const a=this.words.findIndex((a=>a.kanji===e.kanji));this.words[a]=e;const s=`${this.userEmail.replace(/\./g,",")}/words/${e.kanji}`;(0,r.Vx)((0,r.iH)(t.N$),{[s]:{hiragana:e.hiragana,mastered:e.mastered,status:e.status,tags:e.tags?e.tags:[]}})},addTagsToWord(e,a){const s=this.words.findIndex((a=>a.kanji===e.kanji));this.words[s].tags.push(...a)},removeTagsFromWord(e,a){const s=this.words.findIndex((a=>a.kanji===e.kanji));this.words[s].tags=this.words[s].tags.filter((e=>!a.includes(e)))}}})},8505:(e,a,s)=>{s.r(a),s.d(a,{default:()=>H});var o=s(9835),t=s(6970);const r={hidden:"",id:"id-token"},d={hidden:"",id:"email"},n={class:"q-pa-md col-12"},l={class:"row"},i={class:"col-6"};function u(e,a,s,u,p,c){const m=(0,o.up)("q-select"),w=(0,o.up)("q-btn"),h=(0,o.up)("q-td"),g=(0,o.up)("q-checkbox"),f=(0,o.up)("q-tr"),W=(0,o.up)("q-table"),k=(0,o.up)("q-page");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("span",r,(0,t.zw)(e.token),1),(0,o._)("span",d,(0,t.zw)(e.email),1),(0,o.Wm)(k,{class:"row"},{default:(0,o.w5)((()=>[(0,o._)("div",n,[(0,o._)("div",l,[(0,o._)("div",i,[(0,o.Wm)(m,{class:"full-width",outlined:"",modelValue:e.tagsToApply,"onUpdate:modelValue":a[0]||(a[0]=a=>e.tagsToApply=a),multiple:"","use-input":"","use-chips":"","new-value-mode":"add-unique",options:e.flashcard.allTags,label:"Tags"},null,8,["modelValue","options"])]),(0,o.Wm)(w,{class:"col-3",color:"secondary",onClick:a[1]||(a[1]=a=>e.addTagsToNewWords())},{default:(0,o.w5)((()=>[(0,o.Uk)("加入")])),_:1}),(0,o.Wm)(w,{class:"col-3",color:"red",onClick:a[2]||(a[2]=a=>e.removeTagsFromNewWords())},{default:(0,o.w5)((()=>[(0,o.Uk)("移除")])),_:1})]),(0,o.Wm)(W,{title:"新單詞",rows:e.flashcard.newWords,"row-key":"name","rows-per-page-options":[10,20,30]},{body:(0,o.w5)((a=>[(0,o.Wm)(f,{props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"kanji",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(a.row.kanji),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"hiragana",props:a},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(a.row.hiragana),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"mastered",props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{"onUpdate:modelValue":[s=>e.setMastered(a.row),e=>a.row.mastered=e],modelValue:a.row.mastered},null,8,["onUpdate:modelValue","modelValue"])])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"status",props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{outlined:"","onUpdate:modelValue":[s=>e.setArchived(a.row),e=>a.row.status=e],modelValue:a.row.status,options:e.statusOptions},null,8,["onUpdate:modelValue","modelValue","options"])])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"tags",props:a},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{outlined:"",modelValue:a.row.tags,"onUpdate:modelValue":e=>a.row.tags=e,multiple:"","use-input":"","use-chips":"","new-value-mode":"add-unique",options:e.flashcard.allTags,label:"Tags"},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows"]),(0,o.Wm)(w,{class:"fixed-bottom text-center",color:"primary",onClick:a[3]||(a[3]=a=>{e.confirm(),this.$router.push("/")})},{default:(0,o.w5)((()=>[(0,o.Uk)("確認所有新詞")])),_:1})])])),_:1})],64)}var p=s(499),c=s(4836),m=s(1816),w=s(2597),h=function(e,a,s,o){function t(e){return e instanceof s?e:new s((function(a){a(e)}))}return new(s||(s=Promise))((function(s,r){function d(e){try{l(o.next(e))}catch(a){r(a)}}function n(e){try{l(o["throw"](e))}catch(a){r(a)}}function l(e){e.done?s(e.value):t(e.value).then(d,n)}l((o=o.apply(e,a||[])).next())}))};const g=(0,c.v0)(m.H);let f=(0,p.iH)(""),W=(0,p.iH)(""),k=(0,w.T)(),v=(0,p.iH)([]),T=()=>{for(let e=0;e<k.newWords.length;e++)k.addTagsToWord(k.newWords[e],v.value)},_=()=>{for(let e=0;e<k.newWords.length;e++)k.removeTagsFromWord(k.newWords[e],v.value)};(0,c.Aj)(g,(e=>h(void 0,void 0,void 0,(function*(){e?(f.value=yield e.getIdToken(),W.value=e.email,console.log(f)):(f.value="",alert("Please sign in"))}))));const b=(0,o.aZ)({name:"IndexPage",setup(){const e=e=>{e.mastered=!e.mastered,k.updateWord(e)},a=e=>{e.status="archived",k.updateWord(e)},s=()=>{for(let e=0;e<k.newWords.length;e++)k.newWords[e].status="current",k.updateWord(k.newWords[e]);k.$patch({newWords:[]})};return{token:f,email:W,setMastered:e,setArchived:a,confirm:s,flashcard:k,tagsToApply:v,addTagsToNewWords:T,removeTagsFromNewWords:_,statusOptions:["current","archived"]}}});var j=s(1639),y=s(9885),x=s(6673),V=s(4455),U=s(6879),I=s(3532),q=s(7220),Z=s(1006),N=s(9984),Q=s.n(N);const A=(0,j.Z)(b,[["render",u]]),H=A;Q()(b,"components",{QPage:y.Z,QSelect:x.Z,QBtn:V.Z,QTable:U.Z,QTr:I.Z,QTd:q.Z,QCheckbox:Z.Z})}}]);